# モノリスからマイクロサービス

https://www.oreilly.co.jp/books/9784873119311/

## 1 必要十分なマイクロサービス

- マイクロサービスとは, ビジネスドメインに基づいてモデル化された独立してデプロイ可能なサービス
- 「独立してデプロイ可能」とは, 他のサービスに影響を与えることなくあるマイクロサービスをデプロイ可能ということ
  - 実現には各マイクロサービスが疎結合であり, サービス間に安定したインタフェースが必要となる
  - サービス間の境界をどう見つけるかが重要
- 技術
  - マイクロサービス化にあたり新しい技術を導入する必要性は特にない
  - 自分がうまく扱える技術でアプローチし問題に対処してみることが大事
- サイズ
  - コード規模などは重要な指標ではない
  - 自身でどの程度の規模の数のマイクロサービスを扱えるか, サービス間の境界をどう定義するかが重要となる
    - サービスが増えるとシステムの複雑さが増す
  - 一気にマイクロサービス化するのではなく, 段階的に移行することが推奨される
- モノリスとは
  - 単一プロセスでデプロイされるシステム
- モジュラーモノリス
  - 単一プロセスが複数のモジュールで構成され, それぞれ独立で作業できるもの. ただしデプロイ時は結合する必要があるシステム
- モノリスの問題点
  - 同じ場所(サービス)で作業をする人が増えるほど干渉, 衝突することが増える.
  - マイクロサービスでも起きうる問題だが, マイクロサービスでは境界がはっきりしているため, 問題が軽減される
- モノリスの利点
  - デプロイがシンプル, 監視, モニタリング, テストなどが分散システムよりは簡単
  - システムの内のコードの再利用が容易

  ## 2 移行を計画する

  - マイクロサービスは目的ではない. 合理的な意思決定に基づき採用を判断する
  - 確認すべき 3つの質問
    - 達成したいことはなにか
    - マイクロサービス以外の代替案はないか
    - どうすれば移行がうまくいっていると判断できるか
  - マイクロサービスが悪い時のアイデア
    - サービス境界が適切に定められていないとき
  - うまくいっているかどうかの判定
    - 定期的に確認する
    - マイクロサービス移行で目標を達成したかなど
    - 定量的な手段を用いて進歩しているかを確認する
    - 今後変えるべきところを決める